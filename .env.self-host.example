# ==============================================================================
# Plunk Self-Hosting Environment Configuration
# ==============================================================================
# Copy this file to .env and fill in your values
# For detailed setup instructions, see SELF_HOSTING.md

# ==============================================================================
# REQUIRED: Database
# ==============================================================================
# PostgreSQL password for the database
# Generate a strong random password: openssl rand -base64 32
DB_PASSWORD=changeme123

# ==============================================================================
# REQUIRED: Security
# ==============================================================================
# JWT secret for authentication tokens
# Generate a strong random secret: openssl rand -base64 32
JWT_SECRET=

# ==============================================================================
# REQUIRED: Application URLs
# ==============================================================================
# Public URLs where your Plunk instance will be accessible
# For local development, use localhost. For production, use your domain.
API_URI=http://localhost:8080
DASHBOARD_URI=http://localhost:3000
LANDING_URI=http://localhost:4000

# ==============================================================================
# REQUIRED: Email Sending (AWS SES)
# ==============================================================================
# Plunk uses AWS SES to send emails. You'll need an AWS account.
# See: https://aws.amazon.com/ses/
#
# AWS Region (e.g., us-east-1, eu-west-1, etc.)
AWS_SES_REGION=us-east-1

# AWS SES credentials (IAM user with SES sending permissions)
AWS_SES_ACCESS_KEY_ID=
AWS_SES_SECRET_ACCESS_KEY=

# SES Configuration Set name (for tracking bounces and complaints)
# Create one in AWS SES Console or leave as default
SES_CONFIGURATION_SET=plunk-configuration-set

# Optional: Configuration set without tracking (for transactional emails)
SES_CONFIGURATION_SET_NO_TRACKING=plunk-configuration-set-no-tracking

# ==============================================================================
# OPTIONAL: OAuth Authentication
# ==============================================================================
# Enable social login with GitHub and Google
# Leave empty to disable OAuth features

# GitHub OAuth (https://github.com/settings/developers)
GITHUB_OAUTH_CLIENT=
GITHUB_OAUTH_SECRET=

# Google OAuth (https://console.cloud.google.com/apis/credentials)
GOOGLE_OAUTH_CLIENT=
GOOGLE_OAUTH_SECRET=

# ==============================================================================
# OPTIONAL: Stripe Payment Processing
# ==============================================================================
# Only needed if you want to charge users for your Plunk instance
# For self-hosting without billing, leave these empty

# Stripe Secret Key (starts with sk_)
STRIPE_SK=

# Stripe Webhook Secret (starts with whsec_)
STRIPE_WEBHOOK_SECRET=

# Stripe Pricing Configuration
# See STRIPE_METERS_SETUP.md for instructions
STRIPE_PRICE_ONBOARDING=       # One-time onboarding fee price ID
STRIPE_PRICE_EMAIL_USAGE=      # Metered price ID for pay-per-email
STRIPE_METER_EVENT_NAME=emails # Meter event name (default: emails)

# ==============================================================================
# OPTIONAL: Worker Configuration
# ==============================================================================
# Number of worker replicas for processing background jobs
# Increase if you're sending lots of emails or have high load
# Default: 2
WORKER_REPLICAS=2

# ==============================================================================
# ADVANCED: Storage (S3)
# ==============================================================================
# Optional: For storing uploaded images/files
# Leave empty to disable file uploads

AWS_S3_ACCESS_KEY_ID=
AWS_S3_ACCESS_KEY_SECRET=
AWS_S3_BUCKET=
AWS_CLOUDFRONT_DISTRIBUTION_ID=

# ==============================================================================
# ADVANCED: Monitoring & Analytics
# ==============================================================================
# Optional: PostHog for product analytics

POSTHOG_HOST=
POSTHOG_API_KEY=

# Optional: Mapbox for location features
MAPBOX_TOKEN=

# Optional: OpenTelemetry for distributed tracing
OTEL_EXPORTER_OTLP_ENDPOINT=

# ==============================================================================
# DEVELOPMENT ONLY
# ==============================================================================
# These are only used in development, not for self-hosting

# NODE_ENV=production  # Always production for self-hosting
